<h2 class="mb-4">ğŸ“‹ è¨­å‚™ç¸½è¦½è¡¨</h2>

<% if (machines.length > 0) { %>
  <div class="table-responsive text-nowrap">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-dark">
        <tr>
          <th>è¨­å‚™ç·¨è™Ÿ</th>
          <th>è¨­å‚™åç¨±</th>
          <th>ç®¡ç†å–®ä½</th>
          <th>è¨­å‚™ç‹€æ…‹</th>
          <th>è¨­å‚™æè¿°</th>
          <th>è¨­å‚™ä½ç½®</th>
          <th class="no-print">æ“ä½œ</th>
        </tr>
      </thead>
      <tbody>
        <% machines.forEach(machine => { %>
          <tr>
            <td><%= machine.m_id %></td>
            <td><%= machine.m_name %></td>
            <td><%= machine.dep_name %></td>
            <td><%= machine.m_status %></td>
            <td><%= machine.m_desc %></td>
            <td><%= machine.m_pos || 'æœªè¨­å®š' %></td> <!-- é¡¯ç¤ºè¨­å‚™ä½ç½®ï¼Œè‹¥ç„¡å‰‡é¡¯ç¤º 'æœªè¨­å®š' -->
            <td class="no-print">
              <a href="/dashboard/edit/<%= machine.m_id %>" class="btn btn-sm btn-warning">ä¿®æ”¹è¨­å‚™</a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>    
  </div>
  <button class="btn btn-success no-print my-2" onclick="window.print()">åˆ—å°è¡¨æ ¼</button>
<% } else { %>
  <div class="alert alert-info">ç›®å‰æ²’æœ‰ä»»ä½•è¨­å‚™è³‡æ–™ã€‚</div>
<% } %>
<style>
  @media print {
    html,body{
      width: 100%;
      height: auto;
      margin: 0;
      padding: 0;
    }
    .no-print {
      display: none !important;
    }
    .table-responsive {
      overflow: visible !important;
    }
    table {
      width: 100%;
      font-weight: bold;
      font-size: 16px;
      word-break: break-word;
    }
    th, td {
      border: 1px solid #000 !important;
      padding: 6px !important;
      vertical-align: top;
    }
     /* âœ… æ§åˆ¶æ¬„å¯¬ï¼Œé¿å…å¤ªå¯¬é€ æˆæ©«å‘è¶…å‡º */
    th:nth-child(1), td:nth-child(1) { width: 8%; }   /* è¨­å‚™ç·¨è™Ÿ */
    th:nth-child(2), td:nth-child(2) { width: 12%; }  /* è¨­å‚™åç¨± */
    th:nth-child(3), td:nth-child(3) { width: 10%; }  /* ç®¡ç†å–®ä½ */
    th:nth-child(4), td:nth-child(4) { width: 8%; }   /* è¨­å‚™ç‹€æ…‹ */
    th:nth-child(5), td:nth-child(5) { width: 35%; }  /* æè¿°ï¼ˆæœ€å¯¬ï¼‰ */
    th:nth-child(6), td:nth-child(6) { width: 15%; }  /* ä½ç½® */
    th:nth-child(7), td:nth-child(7) { display: none !important; } /* æ“ä½œæ¬„ */
    tr{
      page-break-inside: avoid;
    }
  }

</style>